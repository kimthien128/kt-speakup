# Frontend:

Náº¿u server máº¡nh thÃ¬ run npm trÃªn server, cÃ²n khÃ´ng thÃ¬ chá»‰ deploy file tÄ©nh

## Cai nodejs >= v20.0.0

```
sudo apt install -y nodejs
sudo apt install npm -y
node -v
npm -v
```

Náº¿u version < v20.0.0:

```
npm install -g n
n latest
node -v
npm install -g npm
npm -v
```

## Build frontend tren may local

`npm run build`

```
cd kt-speakup/frontend
npm install
```

Copy lÃªn VPS (náº¿u build á»Ÿ local):\
`scp -r dist/* root@your-vps-ip:/var/www/kt-speakup`\
`scp -r dist/* root@157.230.242.152:/var/www/kt-speakup`

Hoáº·c náº¿u báº¡n Ä‘ang á»Ÿ trong VPS rá»“i thÃ¬ move thÆ° má»¥c dist vÃ o:\
`mv dist /var/www/kt-speakup`

## Cáº¥p quyá»n Ä‘á»ƒ truy cáº­p folder dist cho cÃ¡c user gá»i tá»« web

```
sudo chown -R www-data:www-data /var/www/kt-speakup
sudo chmod -R 755 /var/www/kt-speakup
```

## náº¿u upload láº¡i thÃ¬ nÃªn xÃ³a Ä‘i rá»“i up láº¡i vÃ  Cáº­p nháº­t quyá»n Ä‘á»ƒ overwrite

`sudo rm -rf /var/www/kt-speakup/*`

# 6. Cáº¥u hÃ¬nh Nginx Ä‘á»ƒ Ä‘Æ°a app ra cá»•ng 80 (http)

### proxy_pass

`sudo nano /etc/nginx/sites-available/kt-speakup`

-   Ná»™i dung:\
    ÄÃ¢y lÃ  cáº¥u hÃ¬nh dÃ¹ng Ä‘á»ƒ "forward" táº¥t cáº£ request tá»›i backend (FastAPI) Ä‘ang cháº¡y á»Ÿ localhost:8000.

ðŸ‘‰ PhÃ¹ há»£p khi báº¡n cháº¡y backend báº±ng Uvicorn, vÃ  dÃ¹ng Nginx lÃ m cá»•ng chuyá»ƒn tiáº¿p ra ngoÃ i.

```
server {
    listen 80;
    server_name 157.230.242.152; #your_domain_or_ip

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

```

### trÆ°á»ng há»£p â€œfrontend Ä‘Ã£ build rá»“iâ€ thÃ¬ dÃ¹ng ná»™i dung nÃ y

```
server {
    listen 80;
    server_name speakup.ktstudio.vn; #your_domain_or_ip

    root /var/www/kt-speakup;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

-   KÃ­ch hoáº¡t config:

```
Táº¡o symbolic link Ä‘á»ƒ kÃ­ch hoáº¡t site
sudo ln -s /etc/nginx/sites-available/kt-speakup /etc/nginx/sites-enabled/

Kiá»ƒm tra cáº¥u hÃ¬nh Nginx cÃ³ há»£p lá»‡ khÃ´ng
sudo nginx -t

Khá»Ÿi Ä‘á»™ng láº¡i Nginx
sudo systemctl restart nginx

```

# 7. Truy cáº­p thá»­

`http://<vps-ip>`\
